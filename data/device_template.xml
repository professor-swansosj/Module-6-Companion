<?xml version="1.0" encoding="UTF-8"?>
<!-- 
Device Configuration Template 
Module 6 - Reverse APIs and Event Driven Automation
This XML template demonstrates NETCONF-style configuration data
-->
<config xmlns="urn:ietf:params:xml:ns:netconf:base:1.0">
  <interfaces xmlns="urn:ietf:params:xml:ns:yang:ietf-interfaces">
    <interface>
      <name>GigabitEthernet1</name>
      <description>LAN Interface - Updated via NETCONF Webhook</description>
      <type xmlns:ianaift="urn:ietf:params:xml:ns:yang:iana-if-type">ianaift:ethernetCsmacd</type>
      <enabled>true</enabled>
      <ipv4 xmlns="urn:ietf:params:xml:ns:yang:ietf-ip">
        <enabled>true</enabled>
        <address>
          <ip>192.168.1.1</ip>
          <netmask>255.255.255.0</netmask>
        </address>
      </ipv4>
    </interface>
    <interface>
      <name>GigabitEthernet2</name>
      <description>WAN Interface - Configured via Webhook</description>
      <type xmlns:ianaift="urn:ietf:params:xml:ns:yang:iana-if-type">ianaift:ethernetCsmacd</type>
      <enabled>true</enabled>
      <ipv4 xmlns="urn:ietf:params:xml:ns:yang:ietf-ip">
        <enabled>true</enabled>
        <address>
          <ip>10.0.0.1</ip>
          <netmask>255.255.255.252</netmask>
        </address>
      </ipv4>
    </interface>
  </interfaces>
  
  <routing xmlns="urn:ietf:params:xml:ns:yang:ietf-routing">
    <routing-instance>
      <name>default</name>
      <type xmlns:rt="urn:ietf:params:xml:ns:yang:ietf-routing-types">rt:ipv4-unicast</type>
      <router-id>192.168.1.1</router-id>
      <protocols>
        <protocol>
          <type>ospf:ospfv2</type>
          <name>ospf-1</name>
          <ospf xmlns="urn:ietf:params:xml:ns:yang:ietf-ospf">
            <process-id>1</process-id>
            <areas>
              <area>
                <area-id>0.0.0.0</area-id>
                <area-type>normal-area</area-type>
                <ranges>
                  <range>
                    <prefix>192.168.1.0/24</prefix>
                    <advertise>true</advertise>
                  </range>
                </ranges>
              </area>
            </areas>
          </ospf>
        </protocol>
      </protocols>
    </routing-instance>
  </routing>
  
  <system xmlns="urn:ietf:params:xml:ns:yang:ietf-system">
    <hostname>Router1-Webhook-Managed</hostname>
    <clock>
      <timezone-name>America/New_York</timezone-name>
    </clock>
    <ntp>
      <enabled>true</enabled>
      <server>
        <name>192.168.1.100</name>
        <transport>
          <udp>
            <address>192.168.1.100</address>
            <port>123</port>
          </udp>
        </transport>
        <association-type>server</association-type>
        <iburst>true</iburst>
      </server>
    </ntp>
    <dns-resolver>
      <search>lab.local</search>
      <server>
        <name>dns1</name>
        <udp-and-tcp>
          <address>8.8.8.8</address>
          <port>53</port>
        </udp-and-tcp>
      </server>
      <server>
        <name>dns2</name>
        <udp-and-tcp>
          <address>8.8.4.4</address>
          <port>53</port>
        </udp-and-tcp>
      </server>
    </dns-resolver>
  </system>

  <!-- Example webhook configuration section -->
  <webhooks xmlns="http://example.com/webhook-config">
    <webhook>
      <name>interface-status-change</name>
      <enabled>true</enabled>
      <url>http://192.168.1.100:8000/netconf/interface-event</url>
      <events>
        <event>interface-up</event>
        <event>interface-down</event>
      </events>
      <auth-method>basic</auth-method>
      <username>webhook-user</username>
      <password>webhook-secret</password>
    </webhook>
    <webhook>
      <name>ospf-neighbor-change</name>
      <enabled>true</enabled>
      <url>http://192.168.1.100:8000/netconf/routing-event</url>
      <events>
        <event>ospf-neighbor-up</event>
        <event>ospf-neighbor-down</event>
      </events>
      <auth-method>token</auth-method>
      <token>abc123def456</token>
    </webhook>
  </webhooks>
</config>